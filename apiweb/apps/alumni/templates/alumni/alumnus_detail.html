{% extends "base.html" %}
{% load static %}
{% load template_filters %}

{% block stylesheets %} {{ block.super }} {% endblock stylesheets %}

{% block title %}API - Alumus - {{ alumnus.full_name  }} {% endblock title %}

{% block content %}

<div class="main-content" role="main">

  <h1 class="text-center"> {{ alumnus.full_name }} {% if alumnus.passed_away %} &dagger; {% endif %} </h1>

    <div class="col-xs-12 col-md-9">
        <div class="row">
        {% if not alumnus.passed_away %}
        <div class="col-xs-12 col-sm-3">
            {% if alumnus.photo %}
            <img src="{{ alumnus.photo.url }}" width="150px" style="margin-top: 46.5px; margin-bottom: 10px; padding-top: 8px;"></img>
            {% else %}
            <img src="{% static 'alumni/img/einstein.jpg' %}" width="150px"></img>
            {% endif %}
        </div>

        <div class="col-xs-12 col-sm-9">
            <h3 class="text-left"> Contact Info </h3>
            <table class="table">
                <thead>
                </thead>
                <tbody>
                <tr><th>Name</th><td>{{ alumnus.full_name }}</td></tr>
                <tr><th>Email</th><td><a href="mailto:{{ alumnus.email }}">{{ alumnus.email }}</a></td></tr>
                <tr><th>Position</th><td>{{ alumnus.position }}</td></tr>
                <tr><th>Office</th><td>{{ alumnus.office }}</td></tr>
                <tr><th>Phone</th><td>{{ alumnus.work_phone }}</td></tr>
                </tbody>
            </table>
        </div>
        {% endif %}

        {% if alumnus.degrees.all %}
        <div class="col-xs-12 pull-left">
        <h3 class="text-left"> Theses at API </h3>
        <table class="table">
            <tbody>
            {% for thesis in alumnus.degrees.all %}
            <tr><td>
                {{ thesis.thesis_type|display_thesis_type }}:
                <a href="{% url 'alumni:thesis-detail' thesis.thesis_slug %}">
                    {% if thesis.thesis_title %}
                        {{ thesis.thesis_title }}
                    {% else %}
                        <a href="{% url 'contact' %}">Title Unknown. Please contact us if you know the title!</a>
                    {% endif %}
                </a>
                    {% if thesis.date_of_defence %}
                        ({{ thesis.date_of_defence|date:"Y" }})
                    {% else %}
                        (Year Unknown)
                    {% endif %}
            </td></tr>
            {% endfor %}
            </tbody>
        </table>
        </div>
        {% endif %}


        {% if alumnus.positions.all %}
        <div class="col-xs-12 pull-left">
        <h3 class="text-left"> Positions at API </h3>
        <table class="table">
            <thead>
            </thead>
            <tbody>
            {% for api_position in alumnus.positions.all %}
                <tr>
                    <td>{{ api_position }} </td>
                    <td>{{ api_position.date_start }} </td>
                    <td>{{ api_position.date_stop }} </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        </div>
        {% endif %}

        {% if alumnus.ads_name %}
        <div class="col-xs-12 pull-left">
            <a target="_blank" href="{{ alumnus.ads_name|ads_url }}">
              <h3 class="text-left"> Publications </h3>
            </a>
            {% comment %}
            div class="embed-responsive embed-responsive-16by9">
              <iframe class="embed-responsive-item" src="{{ alumnus.ads_name|ads_url }}" style="padding-left: 7px"></iframe>
            </div>
            {% endcomment %}
        </div>
        {% endif %}

        {% if alumnus.biography %}
        <div class="col-xs-12 pull-left text-justify">
            <h3 class="text-left"> Biography </h3>
            {% autoescape off %}
                {{ alumnus.biography }}
            {% endautoescape %}
        </div>
        {% endif %}

        </div>
    </div>


    <div class="col-xs-12 col-md-3 pull-right text-left">
        {% get_supervisors alumnus as supervisors %}
        {% if supervisors.0 %}
        <h3 class="text-left"> Thesis Advisors </h3>
            <table class="table">
                <thead>
                </thead>
                <tbody>
                {% for supervisor, date_of_defence in supervisors %}
                <tr><td style="padding-left: 0px;"><a href="{% url 'alumni:alumnus-detail' supervisor.slug %}">{{ supervisor.full_name }}
                    {% if date_of_defence %} ({{ date_of_defence|date:"Y" }}) {% else %} (<i class="fa fa-question">) {% endif %}</a></td></tr>
                {% endfor %}
                </tbody>
            </table>
        {% endif %}

        {% get_students alumnus "phd" as phd_students %}
        {% if phd_students.0 %}
        <h3 class="text-left"> PhD Students </h3>
        <table class="table">
            <thead>
            </thead>
            <tbody>
            {% for phd_student, date_of_defence in phd_students  %}
            <tr><td style="padding-left: 0px;"><a href="{% url 'alumni:alumnus-detail' phd_student.slug %}">{{ phd_student }}
                {% if date_of_defence %} ({{ date_of_defence|date:"Y" }}) {% else %} (<i class="fa fa-question">) {% endif %} </a></td></tr>
            {% endfor %}
            </tbody>
        </table>
        {% endif %}

        {% get_students alumnus "msc" as msc_students %}
        {% if msc_students.0 %}
        <h3 class="text-left"> MSc Students </h3>
        <table class="table">
            <thead>
            </thead>
            <tbody>
            {% for msc_student, date_of_defence in msc_students  %}
            <tr><td style="padding-left: 0px;"><a href="{% url 'alumni:alumnus-detail' msc_student.slug %}">{{ msc_student }}
                {% if date_of_defence %} ({{ date_of_defence|date:"Y" }}) {% else %} (<i class="fa fa-question">) {% endif %} </a></td></tr>
            {% endfor %}
            </tbody>
        </table>
        {% endif %}
    </div>


</div>
{% endblock content %}
