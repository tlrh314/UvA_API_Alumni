{% extends "base.html" %}
{% load bootstrap3 %}
{% load template_filters %}

{% block title %} API - Theses {% endblock title %}

{% block content %}

<div class="main-content" role="main">
    {# TODO: Create filter, search, and add MSc and BSc theses? #} 
    {# TODO: make Alumus clickable to show Alumnus page ? #} 

    {% bootstrap_messages %}

    <table class="table table-hover">
        <thead>
            <tr>
                <th>Title</th>
                <th>Author </th>
                <th>Date of Defence</th>
            </tr>
        </thead>
        <tbody>
            {% include "alumni/thesis_paginator.html" %}
            {# Add the content #}
            <h2 class="text-center">Total number of degrees : {{ theses.paginator.count }}</h2>
            {% for thesis, has_title, has_pdf, counter in theses_title_pdf_counter %}
            <tr class="{% cycle '' 'info' %}">
                <td> {% if has_title %}
                        <a href="{% url 'alumni:thesis-detail' thesis.thesis_slug %}">{{ thesis.thesis_title }}
                    {% else %}
                        <a href="mailto:secr-astro-science@uva.nl>Title Unknown. Click here if you know the title!</a>
                    {% endif %}
                    {% if has_pdf %}
                    (<a href="{% url 'alumni:thesis-has-no-pdf' %}">PDF</a>)
                    {% else %}
                        (<a href="TODO pdf missing contact form">PDF</a>)
                    {% endif %}
                    [{{ counter }}]
                </td>
                <td><a href="{% url 'alumni:alumnus-detail' thesis.alumnus.slug %}">{{ thesis.alumnus.full_name }}</a></td>
                <td>{{ thesis.date_of_defence|date:"j M Y" }} </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% include "alumni/thesis_paginator.html" %}
</div>
{% endblock content %}
