{% extends "base.html" %}
{% load static %}

{% block extrastyle %}{{ block.super }}<link rel="stylesheet" type="text/css" href="{% static "admin/css/forms.css" %}" />{% endblock %}

{% block title %} API - Alumni - Survey {% endblock %}

{% block content %}

<div class="main-content" role="main"> 
    <h1 class="text-center"> API Career Development Questionaire (1/3) </h1>

    <div class="col-xs-9" style="float: none; margin: 0 auto;">
        <div class="col-xs-12" style="border: 1px solid #e5e5e5; margin-bottom: 100px; font-family: 'Source Sans Pro', sans-serif;">

            <div class="text-justify" style="padding-top: 15px; padding-bottom: 15px;">

                <h3>Welcome, <a href="{% url 'alumni:alumnus-detail' request.user.alumnus.slug %}" style="color: black;">{{ request.user.alumnus.full_name }}</a> <br></h3>
                <br>

                <p> TODO: welcome message with explanation of the survey </p>

                {% if validlink %}
                <form class="form-horizontal col-xs-12" method="post">{% csrf_token %}

                    {% if form.errors %}
                    <div class="alert alert-danger">
                        {{ form.new_password2.errors }}
                    </div>
                    <div class="form-group has-error has-feedback">
                        <label for="id_new_password1"> Password </label>
                        <input id="id_new_password1" name="new_password1" required="" type="password" class="form-control" aria-describedby="password1HelpBlock">
                        <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                        <p id="password1HelpBlock" class="form-text text-muted">
                            Your password must be 8-20 characters long, contain letters and numbers, and must not contain spaces, special characters, or emoji.
                        </p>
                    </div>
                    <div class="form-group has-error has-feedback">
                        <label for="id_new_password2"> Confirm Password </label>
                        <input id="id_new_password2" name="new_password2" required="" type="password" class="form-control" aria-describedby="password2HelpBlock">
                        <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                        <p id="password2HelpBlock" class="form-text text-muted"> Please enter your new password twice so we can verify you typed it in correctly. </p>
                    </div>
                    {% else %}
                    <div class="form-group">
                        <label for="id_new_password1"> Password </label>
                        <input id="id_new_password1" name="new_password1" required="" type="password" class="form-control" aria-describedby="password1HelpBlock">
                        <p id="password1HelpBlock" class="form-text text-muted">
                            Your password must be 8-20 characters long, contain letters and numbers, and must not contain spaces, special characters, or emoji.
                        </p>
                    </div>
                    <div class="form-group">
                        <label for="id_new_password2"> Confirm Password </label>
                        <input id="id_new_password2" name="new_password2" required="" type="password" class="form-control" aria-describedby="password2HelpBlock">
                        <p id="password2HelpBlock" class="form-text text-muted"> Please enter your new password twice so we can verify you typed it in correctly. </p>
                    </div>
                    {% endif %}

                    <div class="form-group">
                        <button type="submit" class="btn btn-success pull-right"> Next </button>
                        <p class="help-block pull-left text-danger hide" id="form-error">&nbsp; The form is not valid. </p>
                    </div>
                </form>

            </div>

            {% else %}

            The survey link was invalid, possibly because it has already been used or it has expired. <br>
            <br> 
            Please request a new survey link by sending an email to 
            <a href="mailto:{{ contactinfo.secretary_email_address }}">{{ contactinfo.secretary_email_address }}</a>.
            {% endif %}
        </div>
    </div>
</div>

{% endblock %}
